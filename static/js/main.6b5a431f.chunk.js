(this.webpackJsonpstarwars=this.webpackJsonpstarwars||[]).push([[0],{116:function(e,t,r){},118:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(34),a=r.n(c),i=r(5),s=r(13),l=r.n(s),o=r(24),u=r(10),j=r(137),d=r(139),f=r(1);function h(e){var t=e.error;return Object(f.jsx)("main",{className:"app",children:Object(f.jsx)(j.a,{open:!!t,autoHideDuration:6e3,children:Object(f.jsx)(d.a,{severity:"error",sx:{width:"100%"},children:t})})})}var p=r(144);function b(){return Object(f.jsx)("main",{className:"app",children:Object(f.jsxs)("div",{className:"loading-container",children:[Object(f.jsx)(p.a,{color:"secondary"}),Object(f.jsx)("p",{children:"Loading.."}),Object(f.jsx)("p",{children:"API might be slow sometimes, May the force be with you"})]})})}var O,m=r(74),x=r.n(m),v=r(75),g=r.n(v),w=r(143);function y(e){var t=e.isFavorite,r=e.onClick;return Object(f.jsx)(w.a,{className:"btn-favorite",onClick:function(e){e.stopPropagation(),r()},children:t?Object(f.jsx)(x.a,{className:"icon-favorite-filled"}):Object(f.jsx)(g.a,{})})}var k=["title","titleId"];function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function N(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}function C(e,t){var r=e.title,c=e.titleId,a=N(e,k);return n.createElement("svg",S({width:13,height:18,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},a),r?n.createElement("title",{id:c},r):null,O||(O=n.createElement("path",{d:"m2 1 8 8-8 8",stroke:"#1D2026",strokeWidth:3,fill:"none",fillRule:"evenodd"})))}var F,E=n.forwardRef(C),I=(r.p,["title","titleId"]);function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function P(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}function L(e,t){var r=e.title,c=e.titleId,a=P(e,I);return n.createElement("svg",_({width:12,height:18,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},a),r?n.createElement("title",{id:c},r):null,F||(F=n.createElement("path",{d:"M11 1 3 9l8 8",stroke:"#1D2026",strokeWidth:3,fill:"none",fillRule:"evenodd"})))}var D=n.forwardRef(L);r.p;function M(e){var t=e.character,r=e.onSelectCharacter,n=t.name,c=t.image;return Object(f.jsxs)("article",{className:"character-preview flex column align-center",onClick:function(){return r(t)},children:[Object(f.jsx)("img",{src:c,alt:n}),Object(f.jsx)("span",{className:"name flex align-center",children:n})]})}function R(e){var t=e.characters,r=e.index,n=e.onMove,c=e.onSelectCharacter,a=0===r,i=r===t.length-1;return Object(f.jsxs)("section",{className:"character-list flex align-center",children:[Object(f.jsx)("button",{className:a?"disabled":"",onClick:function(){return!a&&n(-1)},children:Object(f.jsx)(D,{})}),t.slice(r).map((function(e){return Object(f.jsx)(M,{character:e,onSelectCharacter:c},e.id)})),Object(f.jsx)("button",{onClick:function(){return!i&&n(1)},children:Object(f.jsx)(E,{})})]})}var G=r(76),J=r.n(G);function q(e){var t=e.character,r=e.onClose,n=t.name,c=t.died,a=t.image,i=t.gender,s=t.hairColor,l=t.species,o=t.born,u=t.bornLocation,j=t.diedLocation,d=t.height;return Object(f.jsx)("div",{className:"character-details",onClick:r,children:Object(f.jsxs)("article",{className:"content flex",onClick:function(e){return e.stopPropagation()},children:[Object(f.jsx)(w.a,{className:"btn-close",onClick:r,children:Object(f.jsx)(J.a,{})}),Object(f.jsx)("section",{className:"flex align-center justify-center",children:Object(f.jsx)("img",{src:a,alt:n})}),Object(f.jsxs)("section",{className:"info",children:[Object(f.jsx)("h2",{children:n}),Object(f.jsxs)("p",{children:["A ",l,", born in the year ",o," at ",u||"unknown","."]}),Object(f.jsxs)("h3",{children:["Gender: ",Object(f.jsx)("span",{children:i})]}),Object(f.jsxs)("h3",{children:["Hair Color: ",Object(f.jsx)("span",{children:s})]}),Object(f.jsxs)("h3",{children:["Status: ",Object(f.jsx)("span",{children:c?"Died in the year ".concat(c," at ").concat(j):"Alive"})]}),Object(f.jsxs)("h3",{children:["Height: ",Object(f.jsxs)("span",{children:[d,"m"]})]})]})]})})}function A(e){var t=e.film,r=e.onFilmLike,c=Object(n.useState)(0),a=Object(u.a)(c,2),i=a[0],s=a[1],l=Object(n.useState)(null),o=Object(u.a)(l,2),j=o[0],d=o[1],h=t.title,p=t.episode_id,b=t.director,O=t.producer,m=t.characters,x=t.opening_crawl,v=t.isFavorite;return Object(n.useEffect)((function(){s(0)}),[t]),Object(f.jsxs)(f.Fragment,{children:[j&&Object(f.jsx)(q,{character:j,onClose:function(){return d(null)}}),Object(f.jsxs)("article",{className:"film-details grow",children:[Object(f.jsxs)("h2",{className:"title",children:[h," - Episode ",p," ",Object(f.jsx)(y,{isFavorite:v,onClick:function(){return r(p)}})]}),Object(f.jsxs)("h3",{children:["Director: ",Object(f.jsx)("span",{className:"fw-400",children:b})]}),Object(f.jsxs)("h3",{children:["Producer: ",Object(f.jsx)("span",{className:"fw-400",children:O})]}),Object(f.jsx)("h3",{children:"Summary:"}),Object(f.jsx)("p",{className:"summary",children:x}),Object(f.jsx)("h3",{children:"Characters:"}),Object(f.jsx)(R,{characters:m,index:i,onMove:function(e){s((function(t){return t+e}))},onSelectCharacter:function(e){return d(e)}})]})]})}var H=r(78),T=r.n(H),z=r(77),W=r.n(z),B=r(141);function Y(e){var t=e.sort,r=e.onSort;return Object(f.jsxs)("section",{className:"film-list-sort flex space-between",children:[Object(f.jsx)(K,{fieldName:"release_date",displayName:"Year",sort:t,onSort:r}),Object(f.jsx)(K,{fieldName:"episode_id",displayName:"Episode",sort:t,onSort:r})]})}function K(e){var t=e.fieldName,r=e.displayName,n=e.sort,c=e.onSort,a=Object(f.jsx)(f.Fragment,{});return 1===n[t]?a=Object(f.jsx)(W.a,{fontSize:"small"}):-1===n[t]&&(a=Object(f.jsx)(T.a,{fontSize:"small"})),Object(f.jsx)(B.a,{onClick:function(){return c(t)},color:"inherit",endIcon:a,children:r})}function Q(e){var t=e.film,r=e.isSelected,n=e.onFilmClick,c=e.onFilmLike,a=t.title,i=t.episode_id,s=t.release_date,l=t.isFavorite;return Object(f.jsxs)("section",{className:"film-preview flex space-between ".concat(r?"selected":""),onClick:function(){return n(i)},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:a}),Object(f.jsxs)("p",{className:"subtitle",children:["Episode ",i," \u2022 ",s]})]}),Object(f.jsx)(y,{isFavorite:l,onClick:function(){return c(i)}})]})}function U(e){var t=e.films,r=e.selectedFilmId,n=e.sort,c=e.onFilmClick,a=e.onFilmLike,i=e.onSearch,s=e.onSort;return Object(f.jsxs)("aside",{className:"film-list flex column",children:[Object(f.jsx)("input",{type:"text",placeholder:"Search...",onChange:i}),Object(f.jsx)(Y,{sort:n,onSort:s}),t.map((function(e){return Object(f.jsx)(Q,{film:e,isSelected:r===e.episode_id,onFilmClick:c,onFilmLike:a},e.episode_id)})),0===t.length&&Object(f.jsx)("div",{children:Object(f.jsx)("h3",{children:"No films found"})})]})}var V=r(58),X=r(79),Z=r.n(X),$=function(e,t){return ee(e,"GET",t)};function ee(e){return te.apply(this,arguments)}function te(){return te=Object(o.a)(l.a.mark((function e(t){var r,n,c,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"GET",n=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,Z()({url:t,method:r,data:n,params:"GET"===r?n:null});case 5:return c=e.sent,e.abrupt("return",c.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.error("httpService error: method ".concat(r,", url: ").concat(t)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(sessionStorage.clear(),window.location.assign("/")),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),te.apply(this,arguments)}var re={save:function(e,t){localStorage.setItem(e,JSON.stringify(t))},load:function(e){var t=localStorage.getItem(e);if(t)return console.log("loaded ".concat(e," from cache")),JSON.parse(t);return null}};var ne={query:function(e,t){return ae.apply(this,arguments)},toggleFavorite:function(e){var t,r=Object(V.a)(ce);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.episode_id===e){n.isFavorite=!n.isFavorite;break}}}catch(c){r.e(c)}finally{r.f()}return re.save("films",ce),ce}},ce=re.load("films");function ae(){return(ae=Object(o.a)(l.a.mark((function e(t,r){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new RegExp(t.title,"i"),c=Object.keys(r)[0],ce){e.next=6;break}return e.next=5,ie();case 5:ce=e.sent;case 6:return e.abrupt("return",ce.filter((function(e){return n.test(e.title)})).sort((function(e,t){return(e[c]-t[c])*r[c]})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return se.apply(this,arguments)}function se(){return(se=Object(o.a)(l.a.mark((function e(){var t,r,n,c,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("https://swapi.dev/api/films/?format=json");case 2:return t=e.sent,r=t.results,e.next=6,le(r);case 6:n=e.sent,c=Object(V.a)(r);try{for(c.s();!(a=c.n()).done;)(i=a.value).release_date=parseInt(i.release_date.slice(0,4)),i.characters=i.characters.map((function(e){var t=e.split("https://swapi.dev/api/people/")[1].split("/")[0];return n[t]}))}catch(s){c.e(s)}finally{c.f()}return re.save("films",r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return oe.apply(this,arguments)}function oe(){return(oe=Object(o.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("https://rawcdn.githack.com/akabab/starwars-api/0.2.1/api/all.json");case 2:return t=e.sent,r=t.reduce((function(e,t){return e[t.id]=t,e}),{}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){var e=Object(n.useMemo)((function(){return re.load("selectedFilmId")}),[]),t=Object(n.useState)(null),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(null),j=Object(u.a)(s,2),d=j[0],p=j[1],O=Object(n.useState)({title:""}),m=Object(u.a)(O,2),x=m[0],v=m[1],g=Object(n.useState)({release_date:1}),w=Object(u.a)(g,2),y=w[0],k=w[1],S=Object(n.useState)(e||4),N=Object(u.a)(S,2),C=N[0],F=N[1];Object(n.useEffect)((function(){var e=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.query(x,y);case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),p("Could not get film data, try to refresh");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[x,y]);var E=function(){var e=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.target.value.replace("\\",""),v({title:r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k((function(e){return Object(i.a)({},t,e[t]?-1*e[t]:1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne.toggleFavorite(t),e.next=3,ne.query(x,y);case 3:r=e.sent,a(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(d)return Object(f.jsx)(h,{error:d});if(!c)return Object(f.jsx)(b,{});var P=c.find((function(e){return e.episode_id===C}));return Object(f.jsx)("main",{className:"app",children:Object(f.jsxs)("div",{className:"main-container flex",children:[Object(f.jsx)(U,{films:c,selectedFilmId:C,sort:y,onFilmClick:function(e){F(e),re.save("selectedFilmId",e)},onFilmLike:_,onSearch:E,onSort:I}),P?Object(f.jsx)(A,{film:P,onFilmLike:_}):Object(f.jsx)("div",{className:"film-details grow",children:Object(f.jsx)("h2",{children:"No film selected"})})]})})}r(116);a.a.render(Object(f.jsx)(ue,{}),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.6b5a431f.chunk.js.map