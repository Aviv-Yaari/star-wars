(this.webpackJsonpstarwars=this.webpackJsonpstarwars||[]).push([[0],{115:function(e,t,r){},117:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(34),c=r.n(a),i=r(5),s=r(11),o=r.n(s),l=r(24),u=r(10),f=r(136),p=r(138),d=r(1);function j(e){var t=e.error;return Object(d.jsx)("main",{className:"app",children:Object(d.jsx)(f.a,{open:!!t,autoHideDuration:6e3,children:Object(d.jsx)(p.a,{severity:"error",sx:{width:"100%"},children:t})})})}var b=r(143);function h(){return Object(d.jsx)("main",{className:"app",children:Object(d.jsxs)("div",{className:"loading-container",children:[Object(d.jsx)(b.a,{color:"secondary"}),Object(d.jsx)("p",{children:"Loading.."}),Object(d.jsx)("p",{children:"API might be slow sometimes, May the force be with you"})]})})}var m,v=r(74),O=r.n(v),x=r(75),w=r.n(x),y=r(142);function g(e){var t=e.isFavorite,r=e.onClick;return Object(d.jsx)(y.a,{className:"btn-favorite",onClick:function(e){e.stopPropagation(),r()},children:t?Object(d.jsx)(O.a,{className:"icon-favorite-filled"}):Object(d.jsx)(w.a,{})})}var k=["title","titleId"];function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function N(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function F(e,t){var r=e.title,a=e.titleId,c=N(e,k);return n.createElement("svg",S({width:13,height:18,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),r?n.createElement("title",{id:a},r):null,m||(m=n.createElement("path",{d:"m2 1 8 8-8 8",stroke:"#1D2026",strokeWidth:3,fill:"none",fillRule:"evenodd"})))}var E,I=n.forwardRef(F),C=(r.p,["title","titleId"]);function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function P(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function L(e,t){var r=e.title,a=e.titleId,c=P(e,C);return n.createElement("svg",_({width:12,height:18,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),r?n.createElement("title",{id:a},r):null,E||(E=n.createElement("path",{d:"M11 1 3 9l8 8",stroke:"#1D2026",strokeWidth:3,fill:"none",fillRule:"evenodd"})))}var M=n.forwardRef(L);r.p;function R(e){var t=e.character,r=t.name,n=t.image;return Object(d.jsxs)("article",{className:"character-preview flex column align-center",children:[Object(d.jsx)("img",{src:n,alt:r}),Object(d.jsx)("span",{className:"name",children:r})]})}function D(e){var t=e.characters,r=e.index,n=e.onMove,a=0===r,c=r===t.length-1;return Object(d.jsxs)("section",{className:"character-list flex align-center",children:[Object(d.jsx)("button",{className:a?"disabled":"",onClick:function(){return!a&&n(-1)},children:Object(d.jsx)(M,{})}),t.slice(r).map((function(e){return Object(d.jsx)(R,{character:e},e.id)})),Object(d.jsx)("button",{onClick:function(){return!c&&n(1)},children:Object(d.jsx)(I,{})})]})}function J(e){var t=e.film,r=e.onFilmLike,a=Object(n.useState)(0),c=Object(u.a)(a,2),i=c[0],s=c[1],o=t.title,l=t.episode_id,f=t.director,p=t.producer,j=t.characters,b=t.opening_crawl,h=t.isFavorite;return Object(n.useEffect)((function(){s(0)}),[t]),Object(d.jsxs)("article",{className:"film-details grow",children:[Object(d.jsxs)("h2",{children:[o," - Episode ",l," ",Object(d.jsx)(g,{isFavorite:h,onClick:function(){return r(l)}})]}),Object(d.jsxs)("h3",{children:["Director: ",Object(d.jsx)("span",{className:"fw-400",children:f})]}),Object(d.jsxs)("h3",{children:["Producer: ",Object(d.jsx)("span",{className:"fw-400",children:p})]}),Object(d.jsx)("h3",{children:"Summary:"}),Object(d.jsx)("p",{className:"summary",children:b}),Object(d.jsx)("h3",{children:"Characters:"}),Object(d.jsx)(D,{characters:j,index:i,onMove:function(e){s((function(t){return t+e}))}})]})}var q=r(77),G=r.n(q),T=r(76),z=r.n(T),W=r(140);function Y(e){var t=e.sort,r=e.onSort;return Object(d.jsxs)("section",{className:"film-list-sort flex space-between",children:[Object(d.jsx)(A,{fieldName:"release_date",displayName:"Year",sort:t,onSort:r}),Object(d.jsx)(A,{fieldName:"episode_id",displayName:"Episode",sort:t,onSort:r})]})}function A(e){var t=e.fieldName,r=e.displayName,n=e.sort,a=e.onSort,c=Object(d.jsx)(d.Fragment,{});return 1===n[t]?c=Object(d.jsx)(z.a,{fontSize:"small"}):-1===n[t]&&(c=Object(d.jsx)(G.a,{fontSize:"small"})),Object(d.jsx)(W.a,{onClick:function(){return a(t)},color:"inherit",endIcon:c,children:r})}function B(e){var t=e.film,r=e.isSelected,n=e.onFilmClick,a=e.onFilmLike,c=t.title,i=t.episode_id,s=t.release_date,o=t.isFavorite;return Object(d.jsxs)("section",{className:"film-preview flex space-between ".concat(r?"selected":""),onClick:function(){return n(i)},children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:c}),Object(d.jsxs)("p",{className:"subtitle",children:["Episode ",i," \u2022 ",s]})]}),Object(d.jsx)(g,{isFavorite:o,onClick:function(){return a(i)}})]})}function H(e){var t=e.films,r=e.selectedFilmId,n=e.sort,a=e.onFilmClick,c=e.onFilmLike,i=e.onSearch,s=e.onSort;return Object(d.jsxs)("aside",{className:"film-list flex column",children:[Object(d.jsx)("input",{type:"text",placeholder:"Search...",onChange:i}),Object(d.jsx)(Y,{sort:n,onSort:s}),t.map((function(e){return Object(d.jsx)(B,{film:e,isSelected:r===e.episode_id,onFilmClick:a,onFilmLike:c},e.episode_id)}))]})}var K=r(58),Q=r(78),U=r.n(Q),V=function(e,t){return X(e,"GET",t)};function X(e){return Z.apply(this,arguments)}function Z(){return Z=Object(l.a)(o.a.mark((function e(t){var r,n,a,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"GET",n=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,U()({url:t,method:r,data:n,params:"GET"===r?n:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.error("httpService error: method ".concat(r,", url: ").concat(t)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(sessionStorage.clear(),window.location.assign("/")),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),Z.apply(this,arguments)}var $={save:function(e,t){localStorage.setItem(e,JSON.stringify(t))},load:function(e){var t=localStorage.getItem(e);if(t)return console.log("loaded ".concat(e," from cache")),JSON.parse(t);return null}};var ee={query:function(e,t){return re.apply(this,arguments)},toggleFavorite:function(e){var t,r=Object(K.a)(te);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.episode_id===e){n.isFavorite=!n.isFavorite;break}}}catch(a){r.e(a)}finally{r.f()}return $.save("films",te),te}},te=$.load("films");function re(){return(re=Object(l.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new RegExp(t.title,"i"),a=Object.keys(r)[0],te){e.next=6;break}return e.next=5,ne();case 5:te=e.sent;case 6:return e.abrupt("return",te.filter((function(e){return n.test(e.title)})).sort((function(e,t){return(e[a]-t[a])*r[a]})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return ae.apply(this,arguments)}function ae(){return(ae=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(o.a.mark((function e(){var t,r,n,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("https://swapi.dev/api/films/?format=json");case 2:return t=e.sent,r=t.results,e.next=6,ce(r);case 6:n=e.sent,a=Object(K.a)(r);try{for(a.s();!(c=a.n()).done;)(i=c.value).release_date=parseInt(i.release_date.slice(0,4)),i.characters=i.characters.map((function(e){var t=e.split("https://swapi.dev/api/people/")[1].split("/")[0];return n[t]}))}catch(s){a.e(s)}finally{a.f()}return $.save("films",r),e.abrupt("return",{v:r});case 11:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:if("object"!==typeof(t=e.t0)){e.next=5;break}return e.abrupt("return",t.v);case 5:e.next=10;break;case 7:throw e.prev=7,e.t1=e.catch(0),e.t1;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ce(){return ie.apply(this,arguments)}function ie(){return(ie=Object(l.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("https://rawcdn.githack.com/akabab/starwars-api/0.2.1/api/all.json");case 2:return t=e.sent,r=t.reduce((function(e,t){return e[t.id]=t,e}),{}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){var e=Object(n.useMemo)((function(){return $.load("selectedFilmId")}),[]),t=Object(n.useState)(null),r=Object(u.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(null),f=Object(u.a)(s,2),p=f[0],b=f[1],m=Object(n.useState)({title:""}),v=Object(u.a)(m,2),O=v[0],x=v[1],w=Object(n.useState)({release_date:1}),y=Object(u.a)(w,2),g=y[0],k=y[1],S=Object(n.useState)(e||4),N=Object(u.a)(S,2),F=N[0],E=N[1];Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.query(O,g);case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b("Could not get film data, try to refresh");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[O,g]);var I=function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.target.value.replace("\\",""),x({title:r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k((function(e){return Object(i.a)({},t,e[t]?-1*e[t]:1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee.toggleFavorite(t),e.next=3,ee.query(O,g);case 3:r=e.sent,c(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(p)return Object(d.jsx)(j,{error:p});if(!a)return Object(d.jsx)(h,{});var P=a.find((function(e){return e.episode_id===F}));return Object(d.jsx)("main",{className:"app",children:a&&Object(d.jsxs)("div",{className:"main-container flex",children:[Object(d.jsx)(H,{films:a,selectedFilmId:F,sort:g,onFilmClick:function(e){E(e),$.save("selectedFilmId",e)},onFilmLike:_,onSearch:I,onSort:C}),P?Object(d.jsx)(J,{film:P,onFilmLike:_}):Object(d.jsx)("div",{className:"film-details"})]})})}r(115);c.a.render(Object(d.jsx)(se,{}),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.87e1851a.chunk.js.map